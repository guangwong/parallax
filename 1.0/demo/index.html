<!DOCTPYE html>
<html>
    <head>
        <title>First demo for parallax</title>
        <link rel="stylesheet" type="text/css" href="styles/styles.css"/>
        <script src="http://g.tbcdn.cn/kissy/k/1.4.3/seed.js" ></script>
    </head>
    <body>

        <div class="parallax-root" style="height: 407px; visibility: hidden">
            <div class="parallax-scene scene" style="width: 2680px;">
                <div class="layer" data-depth="0.2" data-limit-y="30" style="width: 2680px; margin-top: -30px; "><img src="images/bg.jpg"></div>
                <div class="layer" data-depth="0.4" style="width: 2680px;"><img src="images/fruit-clearness.png"></div>
                <div class="layer" data-depth="1.0" style="width: 2680px;"><img src="images/fruit-blur.png"></div>
            </div>
        </div>
        <script>
            //config debug info
            KISSY.config({
                packages : {
                    "parallax" : {
                        base    : "../",
                        debug   : true,
                        ignorePackageNameInUri:true
                    }
                }
            });
            KISSY.use("node,parallax/index", function(S, Node, Parallax){
                var $root   = S.all(".parallax-root");
                var $scene  = $root.all(".scene");

                function onResize(){
                    $root.scrollLeft(($scene.width() - $root.width()) / 2 );
                }

                $root.css("visibility","visible")
                onResize();

                S.all(window).on("resize", onResize);
                new Parallax(".parallax-scene", {
                    frictionY : 0.05,
                    frictionX : 0.05
                });
            });
        </script>
    </body>
</html>

